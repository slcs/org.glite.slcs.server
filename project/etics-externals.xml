<?xml version="1.0" encoding="UTF-8"?>
<!--
    Copyright (c) Members of the EGEE Collaboration. 2004 
    See http://eu-egee.org/partners/ for details on the copyright holders
    For license conditions see the license file or http://eu-egee.org/license.html

    ETICS externals dependencies definition

    Author: Valery Tschopp <tschopp@switch.ch>
    Version: $Id: etics-externals.xml,v 1.6 2007/07/20 12:48:41 vtschopp Exp $
-->
<project name="ETICS externals dependencies definition">

    <!-- local externals repository location -->
    <property name="repository.dir" location="../repository" />
    <property name="externals.dir" location="${repository.dir}/externals" />
    

    <!-- define the properties <ext-name>.bundle and <ext-name>.dir for externals
         required <ext-name>.name, <ext-name>.version and <ext-name>.platform
         properties to be defined -->
    <macrodef name="define-ext-dir">
        <attribute name="name"/>
        <sequential>
            <fail unless="externals.dir" 
                message="ERROR: define-ext-dir: property externals.dir is not set"/>
            <fail unless="@{name}.name"
                message="ERROR: define-ext-dir: property @{name}.name doesn't exist"/>
            <fail unless="@{name}.version"
                message="ERROR: define-ext-dir: property @{name}.version doesn't exist"/>
            <fail unless="@{name}.platform"
                message="ERROR: define-ext-dir: property @{name}.platform doesn't exist"/>
            <property 
                name="_@{name}.bundle.value"
                value="${@{name}.name}/${@{name}.version}/${@{name}.platform}"/>
            <property name="@{name}.bundle" value="${_@{name}.bundle.value}" /> 
            <property name="_@{name}.dir.value"
                value="${externals.dir}/${@{name}.bundle}"/>
            <property name="@{name}.dir" value="${_@{name}.dir.value}" /> 
            <echo message="define-ext-dir: @{name}.dir=${_@{name}.dir.value}"/>
        </sequential>
    </macrodef>
    
    <!-- define path <name>.classpath referencing <name>.fileset -->
    <macrodef name="define-fileset-classpath">
        <attribute name="name"/>
        <sequential>
            <path id="@{name}.classpath">
                <fileset refid="@{name}.fileset"/>
            </path> 
        </sequential>
    </macrodef>

    <!-- get all externals ext.NAME.version, ext.NAME.name and ext.NAME.platform definitions -->
    <property file="project/etics-externals.properties"/>

    <!-- apache-struts -->
    <define-ext-dir name="ext.apache-struts" />
    <fileset id="ext.apache-struts.fileset" dir="${ext.apache-struts.dir}">
        <!-- SUN taglib -->
        <include name="**/jstl-*.jar"/>
        <include name="**/standard-*.jar"/>
        <!-- jakarta commons -->
        <include name="**/commons-beanutils-*.jar"/>
        <include name="**/commons-chain-*.jar"/>
        <include name="**/commons-digester-*.jar"/>
        <!-- Struts -->
        <include name="**/struts-core-*.jar"/>
        <include name="**/struts-taglib-*.jar"/>
        <include name="**/struts-tiles-*.jar"/>
    </fileset>
    <define-fileset-classpath name="ext.apache-struts"/>

    <!-- axis -->
    <define-ext-dir name="ext.axis"/>
    <fileset id="ext.axis.fileset" dir="${ext.axis.dir}">
        <include name="**/axis.jar"/>
        <include name="**/commons-discovery-*.jar"/>
        <include name="**/jaxrpc.jar"/>
        <include name="**/saaj.jar"/>
    </fileset>
    <define-fileset-classpath name="ext.axis"/>
    
    <!-- bouncycastle jdk 1.5 -->
    <define-ext-dir name="ext.bouncycastle"/>
    <fileset id="ext.bouncycastle.bcprov.fileset" dir="${ext.bouncycastle.dir}">
        <include name="**/bcprov-jdk15-*.jar"/>
    </fileset>
    <fileset id="ext.bouncycastle.bcmail.fileset" dir="${ext.bouncycastle.dir}">
        <include name="**/bcmail-jdk15-*.jar"/>
    </fileset>
    <fileset id="ext.bouncycastle.fileset" dir="${ext.bouncycastle.dir}">
        <include name="**/bcprov-jdk15-*.jar"/>
        <include name="**/bcmail-jdk15-*.jar"/>
    </fileset>
    <define-fileset-classpath name="ext.bouncycastle.bcprov"/>
    <define-fileset-classpath name="ext.bouncycastle.bcmail"/>
    <define-fileset-classpath name="ext.bouncycastle"/>

    <!-- commons-cli -->
    <define-ext-dir name="ext.commons-cli"/>
    <fileset id="ext.commons-cli.fileset" dir="${ext.commons-cli.dir}">
        <include name="commons-cli-*.jar"/>
    </fileset>
    <define-fileset-classpath name="ext.commons-cli"/>
    
    <!-- commons-codec -->
    <define-ext-dir name="ext.commons-codec"/>
    <fileset id="ext.commons-codec.fileset" dir="${ext.commons-codec.dir}">
        <include name="commons-codec-*.jar"/>
    </fileset>
    <define-fileset-classpath name="ext.commons-codec"/>

    <!-- commons-collections -->
    <define-ext-dir name="ext.commons-collections"/>
    <fileset id="ext.commons-collections.fileset" dir="${ext.commons-collections.dir}">
        <include name="commons-collections-*.jar"/>
        <exclude name="commons-collections-testframework-*.jar"/>
    </fileset>
    <define-fileset-classpath name="ext.commons-collections"/>

    <!-- commons-configuration -->
    <define-ext-dir name="ext.commons-configuration"/>
    <fileset id="ext.commons-configuration.fileset" dir="${ext.commons-configuration.dir}">
        <include name="commons-configuration-*.jar"/>
    </fileset>
    <define-fileset-classpath name="ext.commons-configuration"/>

    <!-- commons-httpclient -->
    <define-ext-dir name="ext.commons-httpclient"/>
    <fileset id="ext.commons-httpclient.fileset" dir="${ext.commons-httpclient.dir}">
        <include name="commons-httpclient-*.jar"/>
    </fileset>
    <define-fileset-classpath name="ext.commons-httpclient"/>

    <!-- commons-lang -->
    <define-ext-dir name="ext.commons-lang"/>
    <fileset id="ext.commons-lang.fileset" dir="${ext.commons-lang.dir}">
        <include name="commons-lang-*.jar"/>
    </fileset>
    <define-fileset-classpath name="ext.commons-lang"/>

    <!-- commons-logging -->
    <define-ext-dir name="ext.commons-logging"/>
    <fileset id="ext.commons-logging.fileset" dir="${ext.commons-logging.dir}">
        <include name="commons-logging.jar"/>
    </fileset>
    <define-fileset-classpath name="ext.commons-logging"/>

    <!-- jericho-html -->
    <define-ext-dir name="ext.jericho-html"/>
    <fileset id="ext.jericho-html.fileset" dir="${ext.jericho-html.dir}">
        <include name="**/jericho-html-*.jar"/>
    </fileset>
    <define-fileset-classpath name="ext.jericho-html"/>

    <!-- junit -->
    <define-ext-dir name="ext.junit"/>
    <fileset id="ext.junit.fileset" dir="${ext.junit.dir}">
        <include name="junit.jar"/>
    </fileset>
    <define-fileset-classpath name="ext.junit"/>

    <!-- log4j -->
    <define-ext-dir name="ext.log4j"/>
    <fileset id="ext.log4j.fileset" dir="${ext.log4j.dir}">
        <include name="**/log4j-*.jar"/>
    </fileset>
    <define-fileset-classpath name="ext.log4j"/>

    <!-- mysql-jdbc -->
    <define-ext-dir name="ext.mysql-jdbc"/>
    <fileset id="ext.mysql-jdbc.fileset" dir="${ext.mysql-jdbc.dir}">
        <include name="mysql-connector-java-*-bin.jar"/>
    </fileset>
    <define-fileset-classpath name="ext.mysql-jdbc"/>

    <!-- tomcat -->
    <define-ext-dir name="ext.tomcat"/>
    <fileset id="ext.tomcat.fileset" dir="${ext.tomcat.dir}">
        <include name="**/servlet-api.jar"/>
    </fileset>
    <define-fileset-classpath name="ext.tomcat"/>
    

</project>

